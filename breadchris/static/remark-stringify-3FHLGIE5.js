import{a as P}from"./chunk-OU5RBSUU.js";import{a as z}from"./chunk-6Y6CNENK.js";import{a as g}from"./chunk-DIB5H6RO.js";import{a as T,c as E}from"./chunk-V6NBTGC2.js";import{a as M,b as j,c as q,d as G,e as Q,f as $,g as D,h as H,i as v,j as U}from"./chunk-O5GEFHHF.js";import"./chunk-54SQGEM3.js";import"./chunk-RFBBAUMM.js";function k(r,t){let e=-1,n;if(t.extensions)for(;++e<t.extensions.length;)k(r,t.extensions[e]);for(n in t)n==="extensions"||(n==="unsafe"||n==="join"?r[n]=[...r[n]||[],...t[n]||[]]:n==="handlers"?r[n]=Object.assign(r[n],t[n]||{}):r.options[n]=t[n]);return r}function Z(r,t,e,n){let u=e.enter("blockquote"),l=e.createTracker(n);l.move("> "),l.shift(2);let i=e.indentLines(e.containerFlow(r,l.current()),pe);return u(),i}function pe(r,t,e){return">"+(e?"":" ")+r}function O(r,t,e,n){let u=-1;for(;++u<e.unsafe.length;)if(e.unsafe[u].character===`
`&&G(e.stack,e.unsafe[u]))return/[ \t]/.test(n.before)?"":" ";return`\\
`}function W(r,t){let e=String(r),n=e.indexOf(t),u=n,l=0,i=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;n!==-1;)n===u?++l>i&&(i=l):l=1,u=n+t.length,n=e.indexOf(t,u);return i}function x(r,t){return!!(!t.options.fences&&r.value&&!r.lang&&/[^ \r\n]/.test(r.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(r.value))}function X(r){let t=r.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function J(r,t,e,n){let u=X(e),l=r.value||"",i=u==="`"?"GraveAccent":"Tilde";if(x(r,e)){let f=e.enter("codeIndented"),p=e.indentLines(l,me);return f(),p}let a=e.createTracker(n),c=u.repeat(Math.max(W(l,u)+1,3)),o=e.enter("codeFenced"),s=a.move(c);if(r.lang){let f=e.enter(`codeFencedLang${i}`);s+=a.move(e.safe(r.lang,{before:s,after:" ",encode:["`"],...a.current()})),f()}if(r.lang&&r.meta){let f=e.enter(`codeFencedMeta${i}`);s+=a.move(" "),s+=a.move(e.safe(r.meta,{before:s,after:`
`,encode:["`"],...a.current()})),f()}return s+=a.move(`
`),l&&(s+=a.move(l+`
`)),s+=a.move(c),o(),s}function me(r,t,e){return(e?"":"    ")+r}function h(r){let t=r.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function K(r,t,e,n){let u=h(e),l=u==='"'?"Quote":"Apostrophe",i=e.enter("definition"),a=e.enter("label"),c=e.createTracker(n),o=c.move("[");return o+=c.move(e.safe(e.associationId(r),{before:o,after:"]",...c.current()})),o+=c.move("]: "),a(),!r.url||/[\0- \u007F]/.test(r.url)?(a=e.enter("destinationLiteral"),o+=c.move("<"),o+=c.move(e.safe(r.url,{before:o,after:">",...c.current()})),o+=c.move(">")):(a=e.enter("destinationRaw"),o+=c.move(e.safe(r.url,{before:o,after:r.title?" ":`
`,...c.current()}))),a(),r.title&&(a=e.enter(`title${l}`),o+=c.move(" "+u),o+=c.move(e.safe(r.title,{before:o,after:u,...c.current()})),o+=c.move(u),a()),i(),o}function N(r){let t=r.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}B.peek=he;function B(r,t,e,n){let u=N(e),l=e.enter("emphasis"),i=e.createTracker(n),a=i.move(u);return a+=i.move(e.containerPhrasing(r,{before:a,after:u,...i.current()})),a+=i.move(u),l(),a}function he(r,t,e){return e.options.emphasis||"*"}function b(r,t){let e=!1;return E(r,n=>{if("value"in n&&/\r?\n|\r/.test(n.value)||n.type==="break")return e=!0,T}),!!((!r.depth||r.depth<3)&&g(r)&&(t.options.setext||e))}function V(r,t,e,n){let u=Math.max(Math.min(6,r.depth||1),1),l=e.createTracker(n);if(b(r,e)){let s=e.enter("headingSetext"),f=e.enter("phrasing"),p=e.containerPhrasing(r,{...l.current(),before:`
`,after:`
`});return f(),s(),p+`
`+(u===1?"=":"-").repeat(p.length-(Math.max(p.lastIndexOf("\r"),p.lastIndexOf(`
`))+1))}let i="#".repeat(u),a=e.enter("headingAtx"),c=e.enter("phrasing");l.move(i+" ");let o=e.containerPhrasing(r,{before:"# ",after:`
`,...l.current()});return/^[\t ]/.test(o)&&(o="&#x"+o.charCodeAt(0).toString(16).toUpperCase()+";"+o.slice(1)),o=o?i+" "+o:i,e.options.closeAtx&&(o+=" "+i),c(),a(),o}A.peek=de;function A(r){return r.value||""}function de(){return"<"}_.peek=ke;function _(r,t,e,n){let u=h(e),l=u==='"'?"Quote":"Apostrophe",i=e.enter("image"),a=e.enter("label"),c=e.createTracker(n),o=c.move("![");return o+=c.move(e.safe(r.alt,{before:o,after:"]",...c.current()})),o+=c.move("]("),a(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(a=e.enter("destinationLiteral"),o+=c.move("<"),o+=c.move(e.safe(r.url,{before:o,after:">",...c.current()})),o+=c.move(">")):(a=e.enter("destinationRaw"),o+=c.move(e.safe(r.url,{before:o,after:r.title?" ":")",...c.current()}))),a(),r.title&&(a=e.enter(`title${l}`),o+=c.move(" "+u),o+=c.move(e.safe(r.title,{before:o,after:u,...c.current()})),o+=c.move(u),a()),o+=c.move(")"),i(),o}function ke(){return"!"}y.peek=xe;function y(r,t,e,n){let u=r.referenceType,l=e.enter("imageReference"),i=e.enter("label"),a=e.createTracker(n),c=a.move("!["),o=e.safe(r.alt,{before:c,after:"]",...a.current()});c+=a.move(o+"]["),i();let s=e.stack;e.stack=[],i=e.enter("reference");let f=e.safe(e.associationId(r),{before:c,after:"]",...a.current()});return i(),e.stack=s,l(),u==="full"||!o||o!==f?c+=a.move(f+"]"):u==="shortcut"?c=c.slice(0,-1):c+=a.move("]"),c}function xe(){return"!"}function F(r,t){let e=g(r);return!!(!t.options.resourceLink&&r.url&&!r.title&&r.children&&r.children.length===1&&r.children[0].type==="text"&&(e===r.url||"mailto:"+e===r.url)&&/^[a-z][a-z+.-]+:/i.test(r.url)&&!/[\0- <>\u007F]/.test(r.url))}L.peek=ge;function L(r,t,e,n){let u=h(e),l=u==='"'?"Quote":"Apostrophe",i=e.createTracker(n),a,c;if(F(r,e)){let s=e.stack;e.stack=[],a=e.enter("autolink");let f=i.move("<");return f+=i.move(e.containerPhrasing(r,{before:f,after:">",...i.current()})),f+=i.move(">"),a(),e.stack=s,f}a=e.enter("link"),c=e.enter("label");let o=i.move("[");return o+=i.move(e.containerPhrasing(r,{before:o,after:"](",...i.current()})),o+=i.move("]("),c(),!r.url&&r.title||/[\0- \u007F]/.test(r.url)?(c=e.enter("destinationLiteral"),o+=i.move("<"),o+=i.move(e.safe(r.url,{before:o,after:">",...i.current()})),o+=i.move(">")):(c=e.enter("destinationRaw"),o+=i.move(e.safe(r.url,{before:o,after:r.title?" ":")",...i.current()}))),c(),r.title&&(c=e.enter(`title${l}`),o+=i.move(" "+u),o+=i.move(e.safe(r.title,{before:o,after:u,...i.current()})),o+=i.move(u),c()),o+=i.move(")"),a(),o}function ge(r,t,e){return F(r,e)?"<":"["}S.peek=ve;function S(r,t,e,n){let u=r.referenceType,l=e.enter("linkReference"),i=e.enter("label"),a=e.createTracker(n),c=a.move("["),o=e.containerPhrasing(r,{before:c,after:"]",...a.current()});c+=a.move(o+"]["),i();let s=e.stack;e.stack=[],i=e.enter("reference");let f=e.safe(e.associationId(r),{before:c,after:"]",...a.current()});return i(),e.stack=s,l(),u==="full"||!o||o!==f?c+=a.move(f+"]"):u==="shortcut"?c=c.slice(0,-1):c+=a.move("]"),c}function ve(){return"["}function Y(r){let t=v(r),e=r.options.bulletOther;if(!e)return t==="*"?"-":"*";if(e!=="*"&&e!=="+"&&e!=="-")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(e===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+e+"`) to be different");return e}function w(r){let t=r.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function ee(r){let t=w(r),e=r.options.bulletOrderedOther;if(!e)return t==="."?")":".";if(e!=="."&&e!==")")throw new Error("Cannot serialize items with `"+e+"` for `options.bulletOrderedOther`, expected `*`, `+`, or `-`");if(e===t)throw new Error("Expected `bulletOrdered` (`"+t+"`) and `bulletOrderedOther` (`"+e+"`) to be different");return e}function C(r){let t=r.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function re(r,t,e,n){let u=e.enter("list"),l=e.bulletCurrent,i=r.ordered?w(e):v(e),a=r.ordered?ee(e):Y(e),c=e.bulletLastUsed,o=!1;if(t&&(r.ordered?e.options.bulletOrderedOther:e.options.bulletOther)&&c&&i===c&&(o=!0),!r.ordered){let f=r.children?r.children[0]:void 0;if((i==="*"||i==="-")&&f&&(!f.children||!f.children[0])&&e.stack[e.stack.length-1]==="list"&&e.stack[e.stack.length-2]==="listItem"&&e.stack[e.stack.length-3]==="list"&&e.stack[e.stack.length-4]==="listItem"&&e.indexStack[e.indexStack.length-1]===0&&e.indexStack[e.indexStack.length-2]===0&&e.indexStack[e.indexStack.length-3]===0&&(o=!0),C(e)===i&&f){let p=-1;for(;++p<r.children.length;){let d=r.children[p];if(d&&d.type==="listItem"&&d.children&&d.children[0]&&d.children[0].type==="thematicBreak"){o=!0;break}}}}o&&(i=a),e.bulletCurrent=i;let s=e.containerFlow(r,n);return e.bulletLastUsed=i,e.bulletCurrent=l,u(),s}function te(r,t,e,n){let u=e.enter("paragraph"),l=e.enter("phrasing"),i=e.containerPhrasing(r,n);return l(),u(),i}function ne(r,t,e,n){return(r.children.some(i=>z(i))?e.containerPhrasing:e.containerFlow).call(e,r,n)}function oe(r){let t=r.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}I.peek=be;function I(r,t,e,n){let u=oe(e),l=e.enter("strong"),i=e.createTracker(n),a=i.move(u+u);return a+=i.move(e.containerPhrasing(r,{before:a,after:u,...i.current()})),a+=i.move(u+u),l(),a}function be(r,t,e){return e.options.strong||"*"}function ie(r,t,e,n){return e.safe(r.value,n)}function ce(r){let t=r.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function ae(r,t,e){let n=(C(e)+(e.options.ruleSpaces?" ":"")).repeat(ce(e));return e.options.ruleSpaces?n.slice(0,-1):n}var ue={blockquote:Z,break:O,code:J,definition:K,emphasis:B,hardBreak:O,heading:V,html:A,image:_,imageReference:y,inlineCode:H,link:L,linkReference:S,list:re,listItem:U,paragraph:te,root:ne,strong:I,text:ie,thematicBreak:ae};var le=[we];function we(r,t,e,n){if(t.type==="code"&&x(t,n)&&(r.type==="list"||r.type===t.type&&x(r,n))||r.type==="list"&&r.type===t.type&&!!r.ordered==!!t.ordered&&!(r.ordered?n.options.bulletOrderedOther:n.options.bulletOther))return!1;if("spread"in e&&typeof e.spread=="boolean")return r.type==="paragraph"&&(r.type===t.type||t.type==="definition"||t.type==="heading"&&b(t,n))?void 0:e.spread?1:0}var m=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"],fe=[{character:"	",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",before:"[\\r\\n]",inConstruct:"phrasing"},{character:"	",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"\r",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:`
`,inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde","codeFencedMetaGraveAccent","codeFencedMetaTilde","destinationLiteral","headingAtx"]},{character:" ",after:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",before:"[\\r\\n]",inConstruct:"phrasing"},{character:" ",inConstruct:["codeFencedLangGraveAccent","codeFencedLangTilde"]},{character:"!",after:"\\[",inConstruct:"phrasing",notInConstruct:m},{character:'"',inConstruct:"titleQuote"},{atBreak:!0,character:"#"},{character:"#",inConstruct:"headingAtx",after:`(?:[\r
]|$)`},{character:"&",after:"[#A-Za-z]",inConstruct:"phrasing"},{character:"'",inConstruct:"titleApostrophe"},{character:"(",inConstruct:"destinationRaw"},{before:"\\]",character:"(",inConstruct:"phrasing",notInConstruct:m},{atBreak:!0,before:"\\d+",character:")"},{character:")",inConstruct:"destinationRaw"},{atBreak:!0,character:"*",after:`(?:[ 	\r
*])`},{character:"*",inConstruct:"phrasing",notInConstruct:m},{atBreak:!0,character:"+",after:`(?:[ 	\r
])`},{atBreak:!0,character:"-",after:`(?:[ 	\r
-])`},{atBreak:!0,before:"\\d+",character:".",after:`(?:[ 	\r
]|$)`},{atBreak:!0,character:"<",after:"[!/?A-Za-z]"},{character:"<",after:"[!/?A-Za-z]",inConstruct:"phrasing",notInConstruct:m},{character:"<",inConstruct:"destinationLiteral"},{atBreak:!0,character:"="},{atBreak:!0,character:">"},{character:">",inConstruct:"destinationLiteral"},{atBreak:!0,character:"["},{character:"[",inConstruct:"phrasing",notInConstruct:m},{character:"[",inConstruct:["label","reference"]},{character:"\\",after:"[\\r\\n]",inConstruct:"phrasing"},{character:"]",inConstruct:["label","reference"]},{atBreak:!0,character:"_"},{character:"_",inConstruct:"phrasing",notInConstruct:m},{atBreak:!0,character:"`"},{character:"`",inConstruct:["codeFencedLangGraveAccent","codeFencedMetaGraveAccent"]},{character:"`",inConstruct:"phrasing",notInConstruct:m},{atBreak:!0,character:"~"}];function R(r,t={}){let e={enter:u,indentLines:q,associationId:M,containerPhrasing:Ae,containerFlow:_e,createTracker:$,safe:ye,stack:[],unsafe:[],join:[],handlers:{},options:{},indexStack:[],handle:void 0};k(e,{unsafe:fe,join:le,handlers:ue}),k(e,t),e.options.tightDefinitions&&k(e,{join:[Be]}),e.handle=P("type",{invalid:Ce,unknown:Oe,handlers:e.handlers});let n=e.handle(r,void 0,e,{before:`
`,after:`
`,now:{line:1,column:1},lineShift:0});return n&&n.charCodeAt(n.length-1)!==10&&n.charCodeAt(n.length-1)!==13&&(n+=`
`),n;function u(l){return e.stack.push(l),i;function i(){e.stack.pop()}}}function Ce(r){throw new Error("Cannot handle value `"+r+"`, expected node")}function Oe(r){throw new Error("Cannot handle unknown node `"+r.type+"`")}function Be(r,t){if(r.type==="definition"&&r.type===t.type)return 0}function Ae(r,t){return D(r,this,t)}function _e(r,t){return j(r,this,t)}function ye(r,t){return Q(this,r,t)}function se(r){Object.assign(this,{Compiler:e=>{let n=this.data("settings");return R(e,Object.assign({},n,r,{extensions:this.data("toMarkdownExtensions")||[]}))}})}export{se as default};
