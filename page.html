<html><head><title>PixelWars</title><script src="https://unpkg.com/htmx.org@1.9.12"></script><script src="https://unpkg.com/htmx.org@1.9.12/dist/ext/ws.js"></script></head><body><div hx-ext="ws" ws-connect="/game/move"><div hx-swap-oob="innerHTML" id="chat_room"><div id="player-24ee0d19-28ce-4bad-8798-75ad3aa9a22b" style="position:absolute; left:424px; top:360px; width:10px; height:10px; background-color:hsl(0, 0%, -3%);"></div><div id="player-12462670-d427-47a3-9e72-5c75de2a2c74" style="position:absolute; left:10px; top:338px; width:10px; height:10px; background-color:hsl(0, 0%, -1%);"></div><div id="player-ce5d55ce-5694-4336-a7ce-a0a994e00238" style="position:absolute; left:234px; top:228px; width:10px; height:10px; background-color:hsl(0, 0%, -4%);"></div><div style="position:absolute; left:699px; top:162px; width:10px; height:10px; background-color:hsl(0, 0%, -1%);" id="player-9798635f-c274-425a-98bd-c4cb1d5a8cdf"></div><div id="player-b7997a78-3d0c-4884-9111-cb47e85bbe10" style="position:absolute; left:297px; top:116px; width:10px; height:10px; background-color:hsl(0, 0%, -3%);"></div><div id="player-0bc506be-911a-4e04-98ab-b1ae80966e58" style="position:absolute; left:619px; top:59px; width:10px; height:10px; background-color:hsl(0, 0%, -2%);"></div><div id="player-7130912e-c2ea-47e2-82d3-bb61ccf8c208" style="position:absolute; left:640px; top:600px; width:10px; height:10px; background-color:hsl(0, 0%, -2%);"></div><div id="player-a1afcd22-3cb5-49c2-b7b0-94ef0b61c0eb" style="position:absolute; left:271px; top:139px; width:10px; height:10px; background-color:hsl(0, 0%, -2%);"></div><div id="player-23f003da-dfe0-410f-9948-3929878325ae" style="position:absolute; left:10px; top:89px; width:10px; height:10px; background-color:hsl(0, 0%, 0%);"></div><div id="player-5e98e369-44a9-45b1-b6cf-e944144c7f2e" style="position:absolute; left:529px; top:412px; width:10px; height:10px; background-color:hsl(0, 0%, 0%);"></div></div><div><form id="form" ws-send="submit"><input name="chat_message" autocomplete="off" autofocus="" value="left" readonly="" hidden=""></input><input hidden="" id="leftButton" type="submit" value="Send"></input></form><form id="form" ws-send="submit"><input readonly="" hidden="" name="chat_message" autocomplete="off" autofocus="" value="right"></input><input type="submit" value="Send" hidden="" id="rightButton"></input></form><form id="form" ws-send="submit"><input value="up" readonly="" hidden="" name="chat_message" autocomplete="off" autofocus=""></input><input hidden="" id="upButton" type="submit" value="Send"></input></form><form id="form" ws-send="submit"><input value="down" readonly="" hidden="" name="chat_message" autocomplete="off" autofocus=""></input><input id="downButton" type="submit" value="Send" hidden=""></input></form><form id="form" ws-send="submit"><input name="chat_message" autocomplete="off" autofocus="" value="attack" readonly="" hidden=""></input><input hidden="" id="attackButton" type="submit" value="Send"></input></form><form id="form" ws-send="submit"><input value="special" readonly="" hidden="" name="chat_message" autocomplete="off" autofocus=""></input><input value="Send" hidden="" id="specialButton" type="submit"></input></form><form id="form" ws-send="submit"><input readonly="" hidden="" name="chat_message" autocomplete="off" autofocus="" value="one"></input><input hidden="" id="oneButton" type="submit" value="Send"></input></form><form id="form" ws-send="submit"><input hidden="" name="chat_message" autocomplete="off" autofocus="" value="two" readonly=""></input><input hidden="" id="twoButton" type="submit" value="Send"></input></form><form id="form" ws-send="submit"><input readonly="" hidden="" name="chat_message" autocomplete="off" autofocus="" value="three"></input><input type="submit" value="Send" hidden="" id="threeButton"></input></form></div></div><script>
		// Key state tracking
		var keysPressed = {};

		// Start moving when keys are pressed
		document.addEventListener('keydown', function(event) {
			var key = event.key;
			console.log('key pressed');
			if (['a', 'd', 'w', 's', 'n', 'm', '1', '2', '3'].includes(key)) {
				keysPressed[key] = true;
				console.log('key pressed');
				event.preventDefault(); // prevent default scrolling
			}
		});

		// Stop moving when keys are released
		document.addEventListener('keyup', function(event) {
			var key = event.key;
			if (['a', 'd', 'w', 's', 'n', 'm', '1', '2', '3'].includes(key)) {
				keysPressed[key] = false;
				event.preventDefault(); // prevent default scrolling
			}
		});
		
		// Movement function
		function movePlayer() {
			var directions = [];
			if (keysPressed['a']) {
	directions.push('left');
}
if (keysPressed['d']) {
	directions.push('right');
}
if (keysPressed['w']) {
	directions.push('up');
}
if (keysPressed['s']) {
	directions.push('down');
}
if (keysPressed['n']) {
	directions.push('attack');
}
if (keysPressed['m']) {
	directions.push('special');
}
if (keysPressed['1']) {
	directions.push('one');
}
if (keysPressed['2']) {
	directions.push('two');
}
if (keysPressed['3']) {
	directions.push('three');
}
			if (directions.length > 0) {
				if (directions.includes('left')) {
	document.getElementById('leftButton').click();
}
if (directions.includes('right')) {
	document.getElementById('rightButton').click();
}
if (directions.includes('up')) {
	document.getElementById('upButton').click();
}
if (directions.includes('down')) {
	document.getElementById('downButton').click();
}
if (directions.includes('attack')) {
	document.getElementById('attackButton').click();
}
if (directions.includes('special')) {
	document.getElementById('specialButton').click();
}
if (directions.includes('one')) {
	document.getElementById('oneButton').click();
}
if (directions.includes('two')) {
	document.getElementById('twoButton').click();
}
if (directions.includes('three')) {
	document.getElementById('threeButton').click();
}
			}
		}

		// Call movePlayer at regular intervals
		setInterval(movePlayer, 50);
		</script></body></html>